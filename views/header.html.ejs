<header>
    <div class="container" style="width: 80%">
        <nav class="navbar navbar-expand-md navbar-dark bg-dark">
            <div class="">
                <a <%if(!self.req.authorized) { %>
                    href="/" <% } else { %> href="/dashboard" <% } %>>
                    <img
                        src="../assets/images/logo.svg"
                        width="40"
                        height="42"
                    />
                </a>
            </div>
            <button
                class="navbar-toggler"
                type="button"
                data-toggle="collapse"
                data-target="#navbarsExampleDefault"
                aria-controls="navbarsExampleDefault"
                aria-expanded="false"
                aria-label="Toggle navigation"
            >
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarsExampleDefault">
                <ul class="navbar-nav mr-auto">
                    <%if(!self.req.authorized) { %>
                    <li class="nav-item active">
                        <a class="nav-link" href="/"
                            >Home <span class="sr-only">(current)</span></a
                        >
                    </li>
                    <% } else { %>
                    <li class="nav-item active">
                        <a class="nav-link" href="/dashboard"
                            >Dashboard <span class="sr-only">(current)</span></a
                        >
                    </li>
                    <li class="nav-item active">
                        <a class="nav-link" href="/todo"
                            >Todo <span class="sr-only">(current)</span></a
                        >
                    </li>
                    <% } %>

                    <!--
            <li class="nav-item">
              <a class="nav-link" href="#">Link</a>
            </li>
            <li class="nav-item">
              <a class="nav-link disabled" href="#" tabindex="-1" aria-disabled="true">Disabled</a>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="dropdown01" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Dropdown</a>
              <div class="dropdown-menu" aria-labelledby="dropdown01">
                <a class="dropdown-item" href="#">Features</a>
                <a class="dropdown-item" href="#">Pricing</a>
                <a class="dropdown-item" href="#">Documentation</a>
              </div>
            </li>
            -->
                </ul>

                <%if(!self.req.authorized) { %>
                <div class="row">
                    <div class="col-sm">
                        <button
                            class="btn btn-sm btn-primary btn-block"
                            onclick="redirectLogin();"
                        >
                            Login
                        </button>
                    </div>
                    <div class="col-sm">
                        <button
                            class="btn btn-sm btn-primary btn-block"
                            onclick="redirectRegister();"
                        >
                            Register
                        </button>
                    </div>
                </div>
                <% } else { %>
                <div>
                    <button
                        class="btn btn-sm btn-primary btn-block"
                        onclick="logout();"
                    >
                        Logout
                    </button>
                </div>
                <% } %>
            </div>
        </nav>
    </div>
    <div style="width: 100%; height: 0.5%" class="bg-primary"></div>
    <script>
        function logout() {
            document.cookie =
                '_wab_auth_jwt' + '=; expires=Thu, 01 Jan 1970 00:00:01 GMT;';
            window.location.reload();
        }

        function redirectLogin() {
            const url =
                window.location.protocol +
                '//' +
                window.location.hostname +
                ':' +
                window.location.port +
                '/' +
                'login';
            window.location.href = url;
        }

        function redirectRegister() {
            const url =
                window.location.protocol +
                '//' +
                window.location.hostname +
                ':' +
                window.location.port +
                '/' +
                'register';
            window.location.href = url;
        }
    </script>
</header>
